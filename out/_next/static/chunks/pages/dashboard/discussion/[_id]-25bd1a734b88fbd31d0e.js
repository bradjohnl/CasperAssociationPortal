(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{67369:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var s,l,a=n(96156),r=n(85893),i=n(32465),o=n(67294),c=n(49226),d=n(11163),u=n(42283),m=n(29163),h=n(37124),f=n(12245),v=n(64605),p=n(4478),x=n(94677);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var b,_,j=function(e){return o.createElement("svg",g({"data-name":"Icon ionic-md-thumbs-up",xmlns:"http://www.w3.org/2000/svg",width:16.486,height:15.222},e),s||(s=o.createElement("path",{"data-name":"Path 11186",fill:"currentColor",className:"ic_like_solid_svg__cls-1",d:"M5.946 15.222h6.818a1.454 1.454 0 001.356-.928l2.263-5.367a1.517 1.517 0 00.1-.555v-1.53a1.748 1.748 0 00-1.5-1.768h-4.72l.714-3.231.024-.238a1.149 1.149 0 00-.329-.8l-.8-.8-4.996 5.041A1.526 1.526 0 004.44 6.12v7.611a1.5 1.5 0 001.506 1.491z"})),l||(l=o.createElement("path",{"data-name":"Path 11187",fill:"currentColor",className:"ic_like_solid_svg__cls-1",d:"M0 6.342h2.537v8.879H0z"})))};function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var w,N=function(e){return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),b||(b=o.createElement("defs",null,o.createElement("style",null,".ic_dislike_svg__cls-1{fill:none;stroke:#9a9a9a}"))),_||(_=o.createElement("g",{id:"ic_dislike_svg__Icon_ionic-md-thumbs-down","data-name":"Icon ionic-md-thumbs-down",transform:"translate(.5 .5)"},o.createElement("path",{id:"ic_dislike_svg__Path_11188","data-name":"Path 11188",className:"ic_dislike_svg__cls-1",d:"M13.919 4.5H7.1a1.454 1.454 0 00-1.356.928l-2.266 5.367a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768H9.6l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V5.99a1.5 1.5 0 00-1.501-1.49z",transform:"translate(-3.375 -4.5)"}),o.createElement("path",{id:"ic_dislike_svg__Path_11189","data-name":"Path 11189",className:"ic_dislike_svg__cls-1",d:"M28.125 4.5h2.537v8.879h-2.537z",transform:"translate(-14.172 -4.5)"}))))};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var O=function(e){return o.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),w||(w=o.createElement("g",{"data-name":"Icon ionic-md-thumbs-down"},o.createElement("path",{"data-name":"Path 11188",fill:"currentColor",className:"ic_dislike_solid_svg__cls-1",d:"M11.044.5H4.225a1.454 1.454 0 00-1.356.928L.603 6.795a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768h4.722l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V1.99A1.5 1.5 0 0011.044.5z"}),o.createElement("path",{"data-name":"Path 11189",fill:"currentColor",className:"ic_dislike_solid_svg__cls-1",d:"M14.453.5h2.537v8.879h-2.537z"}))))},P=n(24015),E=n(29586),C=n(8517),A=n(97705),M=n(96002);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(){var e=(0,i.Z)(["\n  .discussion-table {\n    .col-1 {\n      width: 0%;\n    }\n    .col-2 {\n      width: 100%;\n    }\n"]);return H=function(){return e},e}var S=m.ZP.div(H()),B=function(e){var t,n=e.data,s=e.noBorder;return(0,r.jsxs)("div",{className:"flex py-8 border-gray1 flex-col lg:flex-row ".concat(s?"":"border-b"),children:[(0,r.jsxs)("div",{className:"flex-none flex flex-row lg:flex-col lg:w-44",children:[(0,r.jsx)("div",{className:"w-24 h-24 mr-5 lg:mr-12",children:(0,r.jsx)("img",{className:"h-full w-full object-cover rounded-lg shadow-lg",src:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.avatar_url)||"/images/img_signature.png",alt:"avatar"})}),(0,r.jsxs)("div",{className:"pt-2 pr-6 mt-auto lg:mt-0",children:[(0,r.jsx)("p",{className:"text-sm font-bold py-1",children:n.user.pseudonym}),(0,r.jsx)("div",{className:"border-gray1 border-b"}),(0,r.jsxs)("p",{className:"text-xxs py-1",children:["Validator ID: ",n.user.validatorId]}),(0,r.jsx)("div",{className:"border-gray1 border-b"}),(0,r.jsx)("p",{className:"text-xxs py-1",children:(0,E.p)(n.user.created_at,"d/m/yyyy - hh:mma")}),(0,r.jsx)("div",{className:"border-gray1 border-b"})]})]}),(0,r.jsx)("div",{className:"chat-content mt-5 lg:m-0",children:(0,r.jsx)("div",{className:"chat-content-body",children:(0,r.jsx)("p",{className:"text-sm mb-5",dangerouslySetInnerHTML:{__html:n.description}})})})]})},L=(0,P.a)((0,M.q)((function(){var e=(0,c.v9)((function(e){return e.authReducer.userInfo.fullInfo})),t=(0,o.useState)(null),n=t[0],s=t[1],l=(0,p.R)().setDialog,a=(0,d.useRouter)().query._id,i=(0,c.I0)(),m=(0,o.useContext)(A.AppContext).setLoading,g=(0,o.useState)(!1),b=g[0],_=g[1],y=(0,o.useState)(!1),w=y[0],k=y[1],P=(0,u.cI)({mode:"onChange"}),E=P.control,M=P.handleSubmit,I=P.setValue,H=(0,v.x)(),L=H.data,z=H.register,Z=H.hasMore,R=H.appendData,V=H.setHasMore,q=H.page,T=H.setPage,X=function(t){t&&n.is_like||!t&&n.is_vote&&!n.is_like||n.user.id===(null===e||void 0===e?void 0:e.id)||l({type:"DialogConfirm",data:{title:"Are you sure you want to ".concat(t?"upvote":"downvote"," this discussion post?"),ok:"OK",cancel:"Cancel"},afterClosed:function(e){e&&i((0,C.ob)({discussion_id:a,is_like:t},(function(e){var t,n;s(D(D({},e.discussion),{is_vote:null===e||void 0===e||null===(t=e.vote)||void 0===t?void 0:t.id,is_like:null===e||void 0===e||null===(n=e.vote)||void 0===n?void 0:n.is_like}))})))}})};(0,o.useEffect)((function(){a&&(Q(),K())}),[a]);var Q=function(){m(!0),i((0,C.XQ)(a,(function(e){s(e),m(!1)}),(function(){m(!1)})))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;i((0,C.oo)({id:a,page:e},(function(e,t){R(e),V(t),T((function(e){return e+1}))})))},F=function(){return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(1)},children:[n.is_vote&&n.is_like?(0,r.jsx)(j,{className:"text-primary"}):(0,r.jsx)(x.Z,{}),(0,r.jsx)("span",{className:"pl-2.5",children:n.likes||0})]}),(0,r.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(0)},children:[n.is_vote&&!n.is_like?(0,r.jsx)(O,{className:"text-primary"}):(0,r.jsx)(N,{}),(0,r.jsx)("span",{className:"pl-2.5",children:n.dislikes||0})]})]})};return(0,r.jsx)(h.Z,{children:(0,r.jsx)(f.Zb,{className:"h-full lg:pl-card lg:py-5 lg:shadow-2xl",noShadow:!0,children:n&&(0,r.jsxs)("div",{className:"w-full h-full",children:[(0,r.jsxs)("div",{className:"card-header lg:mr-card lg:h-70px",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(f.xE,{href:"/dashboard/discussion",text:"Discussions"}),(0,r.jsx)("div",{className:"inline-block lg:hidden pb-2.5",children:(0,r.jsx)(F,{})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3.5",children:[(0,r.jsx)("h3",{className:"text-dark2 text-xl lg:pr-32 font-medium line-clamp-1",children:n.title}),(0,r.jsx)("div",{className:"hidden lg:inline-block",children:(0,r.jsx)(F,{})})]}),(0,r.jsx)("div",{className:"border-primary border-b-2"})]}),(0,r.jsx)("div",{className:"card-body overflow-y-auto lg:h-100%-70px",children:(0,r.jsxs)("div",{className:"lg:pr-card",children:[(0,r.jsx)(B,{data:n,noBorder:!0}),e&&n.user.id!==e.id&&(0,r.jsx)("div",{className:"relative pt-4 mb-8 lg:mb-12 ck-editor-reverse",children:(0,r.jsxs)("form",{onSubmit:M((function(e){var t;_(!0),t=e,i((0,C.nn)({comment_id:(null===t||void 0===t?void 0:t.id)||null,discussion_id:a,description:t.description},(function(e){var t=e.comment,n=null===L||void 0===L?void 0:L.findIndex((function(e){return e.id===t.id}));-1!==n&&L.splice(n,1),R([t],!0),_(!1),I("description","")}),(function(){_(!1)})))})),children:[(0,r.jsx)(u.Qr,{name:"description",control:E,render:function(e){var t=e.field,n=t.value,s=t.onChange;return(0,r.jsx)(f.ML,{value:n,onChange:function(e){k((function(t){return!!e.length})),s(e)}})},rules:{required:""}}),(0,r.jsx)(f.fl,{type:"submit",isDisabled:!w||b,isLoading:b,title:"Add Comment",className:"tmy-5 h-16 lg:absolute lg:m-0 lg:bottom-4 lg:right-12 lg:h-11 text-lg w-full text-white lg:w-48 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-mdext-lg text-white w-full mt-10 lg:w-auto px-7 h-12 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md"})]})}),(0,r.jsx)("div",{className:"hidden lg:block border-primary border-b"}),(0,r.jsx)("div",{className:"pb-20 h-500px",children:(0,r.jsx)(S,{className:"h-full",children:(0,r.jsxs)(f.iA,D(D({},z),{},{className:"discussion-table h-full",onLoadMore:K,hasMore:Z,dataLength:L.length,noMargin:!0,children:[(0,r.jsxs)(f.iA.Header,{children:[(0,r.jsx)(f.iA.HeaderCell,{}),(0,r.jsx)(f.iA.HeaderCell,{})]}),(0,r.jsx)(f.iA.Body,{className:"lg:-mr-card lg:pr-card",children:L.map((function(e,t){return(0,r.jsxs)(f.iA.BodyRow,{children:[(0,r.jsx)(f.iA.BodyCell,{}),(0,r.jsx)(f.iA.BodyCell,{children:(0,r.jsx)(B,{data:e,noBorder:!0})})]},"b-".concat(t))}))})]}))})})]})})]})})})}),"discussions"),"final-all")},40904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/discussion/[_id]",function(){return n(67369)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,8661,9669,3913,2283,1045,7124,8216,9988],(function(){return t=40904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);