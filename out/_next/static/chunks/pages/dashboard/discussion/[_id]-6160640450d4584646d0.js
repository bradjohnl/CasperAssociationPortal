(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{8018:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var s,i,r=n(6156),l=n(5893),a=n(2465),o=n(7294),c=n(9226),d=n(1163),u=n(2283),m=n(9163),h=n(5955),f=n(8569),v=n(4605),x=n(4478),p=n(4677);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var b,j=function(e){return o.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),s||(s=o.createElement("defs",null,o.createElement("style",null,".ic_dislike_svg__cls-1{fill:none;stroke:#9a9a9a}"))),i||(i=o.createElement("g",{id:"ic_dislike_svg__Icon_ionic-md-thumbs-down","data-name":"Icon ionic-md-thumbs-down",transform:"translate(.5 .5)"},o.createElement("path",{id:"ic_dislike_svg__Path_11188","data-name":"Path 11188",className:"ic_dislike_svg__cls-1",d:"M13.919 4.5H7.1a1.454 1.454 0 00-1.356.928l-2.266 5.367a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768H9.6l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V5.99a1.5 1.5 0 00-1.501-1.49z",transform:"translate(-3.375 -4.5)"}),o.createElement("path",{id:"ic_dislike_svg__Path_11189","data-name":"Path 11189",className:"ic_dislike_svg__cls-1",d:"M28.125 4.5h2.537v8.879h-2.537z",transform:"translate(-14.172 -4.5)"}))))};function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var y=function(e){return o.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),b||(b=o.createElement("g",{"data-name":"Icon ionic-md-thumbs-down"},o.createElement("path",{"data-name":"Path 11188",fill:"currentColor",className:"ic_dislike_true_svg__cls-1",d:"M11.044.5H4.225a1.454 1.454 0 00-1.356.928L.603 6.795a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768h4.722l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V1.99A1.5 1.5 0 0011.044.5z"}),o.createElement("path",{"data-name":"Path 11189",fill:"currentColor",className:"ic_dislike_true_svg__cls-1",d:"M14.453.5h2.537v8.879h-2.537z"}))))},w=n(4015),N=n(9586),k=n(8517),O=n(9148);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){var e=(0,a.Z)(["\n  .discussion-table {\n    .col-1 {\n      width: 0%;\n    }\n    .col-2 {\n      width: 100%;\n    }\n"]);return E=function(){return e},e}var M=m.ZP.div(E()),A=function(e){var t=e.data,n=e.noBorder;return(0,l.jsxs)("div",{className:"flex py-8 border-gray1 flex-col lg:flex-row ".concat(n?"":"border-b"),children:[(0,l.jsxs)("div",{className:"flex-none flex flex-row lg:flex-col lg:w-44",children:[(0,l.jsx)("div",{className:"w-24 h-24 mr-5 lg:mr-12",children:(0,l.jsx)("img",{className:"h-full w-full object-cover rounded-lg shadow-lg",src:"/images/img_signature.png",alt:"avatar"})}),(0,l.jsxs)("div",{className:"pt-2 pr-6 mt-auto lg:mt-0",children:[(0,l.jsx)("p",{className:"text-sm font-bold py-1",children:t.user.pseudonym}),(0,l.jsx)("div",{className:"border-gray1 border-b"}),(0,l.jsxs)("p",{className:"text-xxs py-1",children:["Validator ID: ",t.user.validatorId]}),(0,l.jsx)("div",{className:"border-gray1 border-b"}),(0,l.jsx)("p",{className:"text-xxs py-1",children:(0,N.p)(t.user.created_at,"d/m/yyyy - hh:mma")}),(0,l.jsx)("div",{className:"border-gray1 border-b"})]})]}),(0,l.jsx)("div",{className:"chat-content mt-5 lg:m-0",children:(0,l.jsx)("div",{className:"chat-content-body",children:(0,l.jsx)("p",{className:"text-sm mb-5",dangerouslySetInnerHTML:{__html:t.description}})})})]})},D=(0,w.a)((function(){var e=(0,c.v9)((function(e){return e.authReducer.userInfo.fullInfo})),t=(0,o.useState)(null),n=t[0],s=t[1],i=(0,x.R)().setDialog,r=(0,d.useRouter)().query._id,a=(0,c.I0)(),m=(0,o.useContext)(O.AppContext).setLoading,g=(0,o.useState)(!1),b=g[0],_=g[1],w=(0,o.useState)(!1),N=w[0],P=w[1],E=(0,u.cI)({mode:"onChange"}),D=E.control,I=E.handleSubmit,S=E.setValue,H=(0,v.x)(),B=H.data,L=H.register,Z=H.hasMore,z=H.appendData,R=H.setHasMore,V=H.page,T=H.setPage,X=function(t){t&&n.is_like||!t&&n.is_vote&&!n.is_like||n.user.id===(null===e||void 0===e?void 0:e.id)||i({type:"DialogConfirm",data:{title:"Are you sure to ".concat(t?"vote":"unvote"," to discussion?"),ok:"OK",cancel:"Cancel"},afterClosed:function(e){e&&a((0,k.ob)({discussion_id:r,is_like:t},(function(e){var t,n;s(C(C({},e.discussion),{is_vote:null===e||void 0===e||null===(t=e.vote)||void 0===t?void 0:t.id,is_like:null===e||void 0===e||null===(n=e.vote)||void 0===n?void 0:n.is_like}))})))}})};(0,o.useEffect)((function(){r&&(q(),Q())}),[r]);var q=function(){m(!0),a((0,k.XQ)(r,(function(e){s(e),m(!1)}),(function(){m(!1)})))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;a((0,k.oo)({id:r,page:e},(function(e,t){z(e),R(t),T((function(e){return e+1}))})))},K=function(){return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(1)},children:[(0,l.jsx)(p.Z,{className:n.is_vote&&n.is_like?"text-primary":""}),(0,l.jsx)("span",{className:"pl-2.5",children:n.likes||0})]}),(0,l.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(0)},children:[n.is_vote&&!n.is_like?(0,l.jsx)(y,{className:"text-primary"}):(0,l.jsx)(j,{}),(0,l.jsx)("span",{className:"pl-2.5",children:n.dislikes||0})]})]})};return(0,l.jsx)(h.Z,{children:(0,l.jsx)(f.Zb,{className:"h-full lg:pl-24 lg:py-11 lg:shadow-2xl",noShadow:!0,children:n&&(0,l.jsxs)("div",{className:"w-full h-full",children:[(0,l.jsxs)("div",{className:"card-header lg:mr-24 lg:h-70px",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(f.xE,{href:"/dashboard/discussion",text:"Discussions"}),(0,l.jsx)("div",{className:"inline-block lg:hidden pb-2.5",children:(0,l.jsx)(K,{})})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3.5",children:[(0,l.jsx)("h3",{className:"text-dark2 text-xl lg:pr-32 font-medium line-clamp-1",children:n.title}),(0,l.jsx)("div",{className:"hidden lg:inline-block",children:(0,l.jsx)(K,{})})]}),(0,l.jsx)("div",{className:"border-primary border-b-2"})]}),(0,l.jsx)("div",{className:"card-body overflow-y-auto lg:h-100%-70px",children:(0,l.jsxs)("div",{className:"lg:pr-24",children:[(0,l.jsx)(A,{data:n,noBorder:!0}),e&&n.user.id!==e.id&&(0,l.jsx)("div",{className:"relative pt-4 mb-8 lg:mb-12 ck-editor-reverse",children:(0,l.jsxs)("form",{onSubmit:I((function(e){var t;_(!0),t=e,a((0,k.nn)({comment_id:(null===t||void 0===t?void 0:t.id)||null,discussion_id:r,description:t.description},(function(e){var t=e.comment,n=null===B||void 0===B?void 0:B.findIndex((function(e){return e.id===t.id}));-1!==n&&B.splice(n,1),z([t],!0),_(!1),S("description","")}),(function(){_(!1)})))})),children:[(0,l.jsx)(u.Qr,{name:"description",control:D,render:function(e){var t=e.field,n=t.value,s=t.onChange;return(0,l.jsx)(f.ML,{value:n,onChange:function(e){P((function(t){return!!e.length})),s(e)}})},rules:{required:""}}),(0,l.jsx)(f.fl,{type:"submit",isDisabled:!N||b,isLoading:b,title:"Add Comment",className:"tmy-5 h-16 lg:absolute lg:m-0 lg:bottom-4 lg:right-12 lg:h-11 text-lg w-full text-white lg:w-48 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-mdext-lg text-white w-full mt-10 lg:w-auto px-7 h-12 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md"})]})}),(0,l.jsx)("div",{className:"hidden lg:block border-primary border-b"}),(0,l.jsx)("div",{className:"pb-20 h-500px",children:(0,l.jsx)(M,{className:"h-full",children:(0,l.jsxs)(f.iA,C(C({},L),{},{className:"discussion-table h-full",onLoadMore:Q,hasMore:Z,dataLength:B.length,noMargin:!0,children:[(0,l.jsxs)(f.iA.Header,{children:[(0,l.jsx)(f.iA.HeaderCell,{}),(0,l.jsx)(f.iA.HeaderCell,{})]}),(0,l.jsx)(f.iA.Body,{children:B.map((function(e,t){return(0,l.jsxs)(f.iA.BodyRow,{children:[(0,l.jsx)(f.iA.BodyCell,{}),(0,l.jsx)(f.iA.BodyCell,{children:(0,l.jsx)(A,{data:e,noBorder:!0})})]},"b-".concat(t))}))})]}))})})]})})]})})})}),"final-all")},9586:function(e,t,n){"use strict";n.d(t,{p:function(){return i},e:function(){return r}});var s=n(8661),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=new Date(e);return"Invalid Date"===n.toString()?n.toString():(0,s.Z)(n,t)},r=function(e){return e?"".concat(e.substr(0,10),"...").concat(e.substr(-4)):"-"}},904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/discussion/[_id]",function(){return n(8018)}])}},function(e){e.O(0,[9774,2554,1282,8930,6993,6095,2283,8661,9669,7983,5679,8202,9443],(function(){return t=904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);