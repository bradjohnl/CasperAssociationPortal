(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3569],{24015:function(e,r,t){"use strict";t.d(r,{a:function(){return d}});var i=t(96156),n=t(85893),s=t(67294),a=t(11163),l=t(49226);var o=t(44791);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}var d=function(e,r){return function(t){var d=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,r=void 0===e?"public":e,t=(0,l.v9)((function(e){return e.authReducer.userInfo}));return(0,s.useEffect)((function(){if("public"!==r&&r&&t)if(t&&null!==t&&void 0!==t&&t.isLoggedIn)if("member"===t.role){if("auth"===r)return"verifying"===t.period&&a.default.push("/verify-email"),"onboarding"===t.period&&a.default.push("/onboard"),void("final"===t.period&&a.default.push("/dashboard"));if("verifying"===r)return"onboarding"===t.period&&a.default.push("/onboard"),void("final"===t.period&&a.default.push("/dashboard"));if("onboarding"===r)return"verifying"===t.period&&a.default.push("/verify-email"),void("final"===t.period&&a.default.push("/dashboard"));if("final-member"===r||"final-all"===r)return"verifying"===t.period&&a.default.push("/verify-email"),void("onboarding"===t.period&&a.default.push("/onboard"));"final-admin"===r&&("verifying"===t.period&&a.default.push("/verify-email"),"onboarding"===t.period&&a.default.push("/onboard"),"final"===t.period&&a.default.push("/dashboard"))}else["admin","sub-admin"].includes(t.role)&&"final-all"!==r&&"final-admin"!==r&&a.default.push("/admin/dashboard");else"auth"!==r&&a.default.push("/login")}),[t,r]),{user:t}}({urlType:r}).user;if(r&&"public"!==r){if(!d)return(0,n.jsx)(o.Z,{});if("auth"===r&&d.isLoggedIn)return(0,n.jsx)(o.Z,{});if("auth"!==r&&!d.isLoggedIn)return(0,n.jsx)(o.Z,{});if("member"===d.role){if(["final-all","final-member"].includes(r)&&"final"!==d.period)return(0,n.jsx)(o.Z,{});if(["verifying"].includes(r)&&"verifying"!==d.period)return(0,n.jsx)(o.Z,{});if(["onboarding"].includes(r)&&"onboarding"!==d.period)return(0,n.jsx)(o.Z,{})}if(["admin","sub-admin"].includes(d.role)&&["verifying","onboarding","final-member"].includes(r))return(0,n.jsx)(o.Z,{})}return(0,n.jsx)(e,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t))}}},96375:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var i=t(67294),n=t(49226),s=t(43022);function a(){var e=(0,n.v9)((function(e){return e.authReducer.metrics})),r=(0,n.v9)((function(e){return e.authReducer.metricConfig})),t=(0,n.I0)();(0,i.useEffect)((function(){Object.keys(e).length||t((0,s.qA)())}),[e]);return{metrics:e,refreshMetrics:function(){t((0,s.qA)())},metricConfig:r}}},47825:function(e,r,t){"use strict";t.r(r);var i=t(85893),n=t(96156),s=t(17445),a=t(41664),l=t(67294),o=t(49226),c=t(24015),d=t(96375),u=t(37124),f=t(12245),p=t(29586);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var x=[{aspect:"uptime",label:"Uptime"},{aspect:"block_height_average",label:"Block Height Average"},{aspect:"update_responsiveness",label:"Update Responsiveness"}];r.default=(0,c.a)((function(){var e,r,t,n,c,m,v,b,g,j,y=(0,d.Z)(),_=y.metrics,N=y.refreshMetrics,w=(0,o.v9)((function(e){return e.authReducer.userInfo.fullInfo})),O=(0,l.useState)(),k=O[0],P=O[1],Z=(0,l.useState)(),E=Z[0],D=Z[1],S=(0,l.useState)([]),I=S[0],C=S[1];(0,l.useEffect)((function(){N()}),[]),(0,l.useEffect)((function(){w&&P(null!==w&&void 0!==w&&w.kyc_verified_at?1:0)}),[w]),(0,l.useEffect)((function(){if(_&&Object.keys(_).length>0){D(null===_||void 0===_?void 0:_.node_status);var e=[];x.forEach((function(r){_[r.aspect]<(null===_||void 0===_?void 0:_.monitoring_criteria[r.aspect].probation_start)&&e.push(h(h(h({},r),null===_||void 0===_?void 0:_.monitoring_criteria[r.aspect]),{},{time_start:_["".concat(r.aspect,"_time_start")]}))})),console.log(e),C(e)}}),[_]);var M=function(){return{1:{label:"Verified",desc:(0,i.jsx)(i.Fragment,{children:"Great work being verified. Now just keep that node running strong to maintain access"})},0:{label:"Not verified",desc:(0,i.jsxs)(i.Fragment,{children:["Some parts of the portal are not yet open to you!"," ",(0,i.jsx)(a.default,{href:"/dashboard/verification/",children:(0,i.jsx)("a",{className:"underline text-primary pr-1",children:"Get verified"})}),"for full access!"]})}}[k]},R=function(){if("Probation"===E){var e,r,t;return t=x.map((function(e){return h(h({},e),{},{time_end:_["".concat(e.aspect,"_time_end")]})})).sort((function(e,r){return(0,s.Z)(new Date(e.time_end),new Date(r.time_end))})),{label:"Probation",desc:(0,i.jsxs)("div",{className:"flex",children:["Probation! You must increase your",(0,i.jsxs)("span",{className:"px-1",children:[null===(e=t[0])||void 0===e?void 0:e.label," within"]}),(0,i.jsx)(f.ZF,{endTime:new Date(null===(r=t[0])||void 0===r?void 0:r.time_end),hideProgressBar:!0})]})}}if("Pulled"===E){var n=[];return x.forEach((function(e){_[e.aspect]<_.monitoring_criteria[e.aspect].probation_start&&n.push(e.label)})),{label:"Pulled!",desc:(0,i.jsxs)(i.Fragment,{children:["You must increase your ",n.join(", ")," to restore full portal access!"]})}}return{label:"Online",desc:(0,i.jsx)(i.Fragment,{children:"Nice work!"})}};return(0,i.jsx)(u.Z,{bg:"bg-gradient-to-tl from-gray2 to-white1",children:(0,i.jsxs)("div",{className:"membership h-full flex flex-col gap-5 w-328",children:[I.map((function(e){return(0,i.jsxs)(f.Zb,{className:"flex flex-col px-9 py-5 bg-primary",children:[(0,i.jsxs)("span",{className:"text-base font-medium text-white",children:[e.label," Warning!"]}),(0,i.jsxs)("span",{className:"pt-1.25 text-xs text-white",children:["Your ",e.label," has fallen outside the minimum acceptable range on"," ",(0,p.p)(e.time_start,"MM/dd/yyyy HH:mm aa")," and you have been placed on probation. Don\u2019t panic, there is still time to correct this."]}),(0,i.jsxs)("span",{className:"pt-1.25 text-xs text-white",children:["You have ",e.given_to_correct_value," ",e.given_to_correct_unit," to correct this problem before your membership status is revoked. Bring your ",e.label," ",e.probation_start," to correct this issue."]})]})})),(0,i.jsxs)(f.Zb,{className:"flex flex-col px-9 py-5",children:[(0,i.jsx)("span",{className:"text-base font-medium",children:"Membership"}),(0,i.jsx)("div",{className:"mt-2.5 mb-8 border border-primary border-b"}),(0,i.jsx)("span",{className:"text-xs pb-5",children:"All members of the Casper portal need to maintain minimum node\n            metrics to have access to all parts of the portal including Node\n            Uptime, Block Height, and Update Responsiveness. If your node falls\n            short of the minimum criteria, you will be notified through email\n            and given a grace period to fix your statistics. If you do not fix\n            it in time, some areas of your portal access will be blocked until\n            your average is restored."})]}),(0,i.jsxs)("div",{className:"flex gap-5",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-5 flex-grow",children:[(0,i.jsxs)(f.Zb,{className:"flex px-9 py-6 gap-6",children:[(0,i.jsx)("div",{className:"w-32",children:(0,i.jsx)("span",{className:"text-base font-medium",children:"Node Status:"})}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-1.25",children:[(0,i.jsx)("p",{className:"text-base font-medium text-primary",children:null===(e=R())||void 0===e?void 0:e.label}),(0,i.jsx)("span",{className:"text-sm text-gray",children:null===(r=R())||void 0===r?void 0:r.desc})]})]}),(0,i.jsxs)(f.Zb,{className:"flex px-9 py-6 gap-6",children:[(0,i.jsx)("div",{className:"w-32",children:(0,i.jsx)("span",{className:"text-base font-medium",children:"KYC Status:"})}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-1.25",children:[(0,i.jsx)("p",{className:"text-base font-medium text-primary",children:null===(t=M())||void 0===t?void 0:t.label}),(0,i.jsx)("span",{className:"text-sm text-gray",children:null===(n=M())||void 0===n?void 0:n.desc})]})]})]}),(0,i.jsx)("div",{className:"flex-1 min-h-0",children:(0,i.jsxs)("div",{className:"flex h-full gap-5",children:[(0,i.jsxs)(f.Zb,{className:"flex flex-col px-6 pt-6 h-full w-40 metrics-card ".concat(_.uptime<(null===_||void 0===_||null===(c=_.monitoring_criteria)||void 0===c||null===(m=c.uptime)||void 0===m?void 0:m.warning_level)&&"metrics-card-warning"),children:[(0,i.jsx)("p",{className:"text-sm title font-medium pb-1",children:"Uptime"}),(0,i.jsxs)("p",{className:"text-xs desc",children:["Average: ",_.uptime,"%"]}),(0,i.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,i.jsx)(f.ko,{shape:"circle",value:_.uptime,mask:"x%"})})]}),(0,i.jsxs)(f.Zb,{className:"flex flex-col px-6 pt-6 h-full w-40 metrics-card ".concat(_.block_height_average<(null===_||void 0===_||null===(v=_.monitoring_criteria)||void 0===v||null===(b=v.block_height_average)||void 0===b?void 0:b.warning_level)&&"metrics-card-warning"),children:[(0,i.jsx)("p",{className:"text-sm font-medium pb-1",children:"Block Height"}),(0,i.jsxs)("p",{className:"text-xs desc",children:["Current: ",_.block_height_average,"/",_.block_height_average]}),(0,i.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,i.jsx)(f.ko,{shape:"circle",value:_.block_height_average,mask:"x"})})]}),(0,i.jsxs)(f.Zb,{className:"flex flex-col px-6 pt-6 h-full w-40 metrics-card ".concat(_.update_responsiveness<(null===_||void 0===_||null===(g=_.monitoring_criteria)||void 0===g||null===(j=g.update_responsiveness)||void 0===j?void 0:j.warning_level)&&"metrics-card-warning"),children:[(0,i.jsx)("p",{className:"text-sm font-medium pb-1",children:"Updates"}),(0,i.jsx)("p",{className:"text-xs desc",children:"On Time"}),(0,i.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,i.jsx)(f.ko,{shape:"circle",value:_.update_responsiveness,mask:"x%"})})]})]})})]})]})})}),"final-all")},29586:function(e,r,t){"use strict";t.d(r,{p:function(){return n},e:function(){return s}});var i=t(38661),n=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",t=new Date(e);return"Invalid Date"===t.toString()?t.toString():(0,i.Z)(t,r)},s=function(e){return e?"".concat(e.substr(0,10),"...").concat(e.substr(-4)):"-"}},91395:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/membership",function(){return t(47825)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,8661,1045,804],(function(){return r=91395,e(e.s=r);var r}));var r=e.O();_N_E=r}]);