(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6130],{24015:function(e,r,n){"use strict";n.d(r,{a:function(){return u}});var s=n(96156),i=n(85893),l=n(67294),a=n(11163),t=n(49226);var o=n(44791);function d(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,s)}return n}var u=function(e,r){return function(n){var u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,r=void 0===e?"public":e,n=(0,t.v9)((function(e){return e.authReducer.userInfo}));return(0,l.useEffect)((function(){if("public"!==r&&r&&n)if(n&&null!==n&&void 0!==n&&n.isLoggedIn)if("member"===n.role){if("auth"===r)return"verifying"===n.period&&a.default.push("/verify-email"),"onboarding"===n.period&&a.default.push("/onboard"),void("final"===n.period&&a.default.push("/dashboard"));if("verifying"===r)return"onboarding"===n.period&&a.default.push("/onboard"),void("final"===n.period&&a.default.push("/dashboard"));if("onboarding"===r)return"verifying"===n.period&&a.default.push("/verify-email"),void("final"===n.period&&a.default.push("/dashboard"));if("final-member"===r||"final-all"===r)return"verifying"===n.period&&a.default.push("/verify-email"),void("onboarding"===n.period&&a.default.push("/onboard"));"final-admin"===r&&("verifying"===n.period&&a.default.push("/verify-email"),"onboarding"===n.period&&a.default.push("/onboard"),"final"===n.period&&a.default.push("/dashboard"))}else"admin"===n.role&&"final-all"!==r&&"final-admin"!==r&&a.default.push("/admin/dashboard");else"auth"!==r&&a.default.push("/login")}),[n,r]),{user:n}}({urlType:r}).user;if(r&&"public"!==r){if(!u)return(0,i.jsx)(o.Z,{});if("auth"===r&&u.isLoggedIn)return(0,i.jsx)(o.Z,{});if("auth"!==r&&!u.isLoggedIn)return(0,i.jsx)(o.Z,{});if("member"===u.role){if(["final-all","final-member"].includes(r)&&"final"!==u.period)return(0,i.jsx)(o.Z,{});if(["verifying"].includes(r)&&"verifying"!==u.period)return(0,i.jsx)(o.Z,{});if(["onboarding"].includes(r)&&"onboarding"!==u.period)return(0,i.jsx)(o.Z,{})}if("admin"===u.role&&["verifying","onboarding","final-member"].includes(r))return(0,i.jsx)(o.Z,{})}return(0,i.jsx)(e,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?d(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({},n))}}},24205:function(e,r,n){"use strict";n.d(r,{Ge:function(){return s},QI:function(){return i},zC:function(){return l},qn:function(){return a},tH:function(){return t},VX:function(){return o},FZ:function(){return d},ec:function(){return u},mS:function(){return c}});var s=/^[\.a-zA-Z\s ]*$/,i=/^[_A-Za-z0-9-+]+(\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z\u200c\u200b]{2,})$/,l=/(^[0-9])/,a=/^-?[1-9]/,t=/^[A-Za-z0-9-]*$/,o=/^[A-Za-z0-9-]*$/,d=/(^)@[A-Za-z0-9-\_]*$/,u=/^[A-Za-z0-9-\s\.\_ ]*$/,c=new RegExp("".concat(/(?=.*?[a-zA-Z])/.source).concat(/(?=.*?[0-9])/.source).concat(/(?=.*?[\!\"\-\@\#\$\%\&\*\(\)\'\^\`\.\,\/\:\;\_\+\=\<\>\?\{\}\[\\\]])/.source))},8922:function(e,r,n){"use strict";n.r(r);var s=n(96156),i=n(85893),l=n(41664),a=n(67294),t=n(42283),o=n(49226),d=n(24015),u=n(25955),c=n(89),f=n(4478),m=n(8517),p=n(56073),x=n(24205),h=n(43022);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,s)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var b=function(e){var r=e.checkUserPassword,n=e.guardFor,s=(0,f.R)().onClosed,l=(0,a.useState)(),t=l[0],o=l[1];return(0,i.jsxs)("div",{className:"py-16 text-center w-96 mx-auto",children:[(0,i.jsx)("h3",{className:"capitalize text-xl text-center mb-2.5",children:"Please verify your current password first"}),(0,i.jsx)("input",{value:t,type:"password",onChange:function(e){return o(e.target.value)},placeholder:"Password",className:"w-full h-14 px-7 my-10 rounded-full shadow-activeLink focus:outline-none"}),(0,i.jsxs)("div",{className:"flex gap-2.5 flex-col items-center",children:[(0,i.jsx)(c.zx,{primary:!0,onClick:function(){r(t,n)},size:"large",disabled:!t,className:"w-full",children:"Submit"}),(0,i.jsx)(c.zx,{primaryOutline:!0,onClick:function(){s()},size:"large",className:"w-full",children:"Cancel"})]})]})},g={email:!1,password:!1,username:!1,twoFA_login:!1};r.default=(0,d.a)((function(){var e,r,n,d,v,w,y,N,O,_=(0,f.R)(),P=_.setDialog,k=_.onClosed,Z=(0,a.useState)(g),A=Z[0],C=Z[1],I=(0,a.useRef)(null),z=(0,o.I0)(),F=(0,a.useContext)(p.AppContext).setLoading,S=(0,o.v9)((function(e){return e.authReducer.userInfo})),E=(0,a.useState)(!1),L=E[0],D=E[1],q=(0,t.cI)(),U=q.register,$=q.handleSubmit,R=q.reset,T=q.formState,V=q.setValue,X=q.getValues,H=(q.watch,function(e){A[e]?(C(j({},g)),V(e,null===S||void 0===S?void 0:S.fullInfo[e])):C(j(j({},g),{},(0,s.Z)({},e,!0)))}),M=function(e,r){+(null===S||void 0===S?void 0:S.fullInfo[e])!==+r?C(j(j({},g),{},(0,s.Z)({},e,!0))):C(j({},g))},Q=function(e,r){F(!0),z((0,m.oH)({current_password:e},(function(e){F(!1),A[r]=!1,H(r),k()}),(function(e){F(!1)})))},G=function(){return Object.values(A).some((function(e){return e}))};(0,a.useEffect)((function(){var e,r,n,s;R({email:(null===(e=S.fullInfo)||void 0===e?void 0:e.new_email)||(null===(r=S.fullInfo)||void 0===r?void 0:r.email),twoFA_login:"".concat(null===(n=S.fullInfo)||void 0===n?void 0:n.twoFA_login),username:null===(s=S.fullInfo)||void 0===s?void 0:s.username})}),[S]);var B=function(e){var r=e.mobile,n=e.field,s=G();return(0,i.jsx)("button",{type:"button",className:"".concat(r?"inline lg:hidden":"pl-6 hidden lg:inline"," text-primary focus:outline-none disabled:opacity-40"),onClick:function(){return function(e){["password","email"].includes(e)&&!A[e]?P({type:"DialogCustom",data:{content:(0,i.jsx)(b,{checkUserPassword:Q,guardFor:e})}}):H(e)}(n)},disabled:!A[n]&&s,children:A[n]?"Cancel":"Edit"})};return(0,i.jsx)(u.Z,{children:(0,i.jsx)(c.Zb,{className:"h-full lg:pl-24 lg:py-11 lg:shadow-2xl",noShadow:!0,children:(0,i.jsxs)("div",{className:"w-full h-full",children:[(0,i.jsxs)("div",{className:"card-header lg:mr-24 lg:h-70px",children:[(0,i.jsxs)("div",{className:"flex justify-between items-end mb-3.5",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("h3",{className:"mr-24 text-dark2 text-xl font-medium",children:(0,i.jsx)(l.default,{href:"/dashboard/settings",children:(0,i.jsx)("a",{children:"User Settings"})})}),(0,i.jsx)("h3",{className:"text-gray text-xl font-medium",children:(0,i.jsx)(l.default,{href:"/dashboard/profile",children:(0,i.jsx)("a",{children:"My profile"})})})]}),(0,i.jsx)("div",{children:(0,i.jsx)(c.zx,{primary:!0,isLoading:L,sizeSpinner:20,disabled:!G(),onClick:function(){return I.current.click()},children:"Save Changes"})})]}),(0,i.jsx)("div",{className:"border-primary border-b-2"})]}),(0,i.jsx)("div",{className:"card-body pt-8 pb-28 overflow-x-hidden overflow-y-auto lg:h-100%-70px -ml-1 pl-1",children:(0,i.jsx)("div",{className:"lg:pr-24",children:(0,i.jsxs)("form",{onSubmit:$((function(e){D(!0),C(j({},g)),V("password",null),V("confirm_password",null),z((0,m.d2)(e,(function(e){D(!1),z((0,h.Nq)({fullInfo:j(j({},S.fullInfo),e)}))}),(function(){D(!1),z((0,h.Nq)({fullInfo:j({},S.fullInfo)}))})))})),children:[(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,i.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("label",{htmlFor:"username",children:"Username"}),(0,i.jsx)(B,{mobile:!0,field:"username"})]}),(0,i.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,i.jsx)("input",j(j({name:"username",type:"text",disabled:!A.username},U("username",A.username?{required:"User Name is required",pattern:{message:"User Name is invalid",value:x.VX}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none disabled:text-gray"})),(0,i.jsx)(B,{field:"username"})]}),A.username&&(null===(e=T.errors)||void 0===e?void 0:e.username)&&(0,i.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(r=T.errors.username)||void 0===r?void 0:r.message})]})}),(0,i.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("label",{htmlFor:"email",children:["Email Address",(null===(n=S.fullInfo)||void 0===n?void 0:n.new_email)&&(0,i.jsx)("span",{className:"text-primary",children:" (verifying)"})]}),(0,i.jsx)(B,{mobile:!0,field:"email"})]}),(0,i.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,i.jsx)("input",j(j({name:"email",type:"text",disabled:!A.email},U("email",A.email?{required:"Email is required",pattern:{message:"Email is invalid",value:x.QI}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none disabled:text-gray"})),(0,i.jsx)(B,{field:"email"})]}),A.email&&(null===(d=T.errors)||void 0===d?void 0:d.email)&&(0,i.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(v=T.errors.email)||void 0===v?void 0:v.message})]})})]}),(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,i.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Update Password"}),(0,i.jsx)(B,{mobile:!0,field:"password"})]}),(0,i.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,i.jsx)("input",j(j({disabled:!A.password,placeholder:"New Password",type:"password"},U("password",A.password?{required:"New Password is required",minLength:{message:"Min 8 characters",value:8},pattern:{message:"Password is invalid",value:x.mS}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none"})),(0,i.jsx)(B,{field:"password"})]}),A.password&&(null===(w=T.errors)||void 0===w?void 0:w.password)&&(0,i.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(y=T.errors.password)||void 0===y?void 0:y.message}),(0,i.jsx)("div",{className:"pt-8",children:(0,i.jsx)("input",j(j({placeholder:"Confirm New Password",type:"password",disabled:!A.password},U("confirm_password",A.password?{validate:function(e){return e===X().password||"Password not match"}}:{})),{},{className:"w-full lg:w-3/4 mr-6 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none"}))}),A.password&&(null===(N=T.errors)||void 0===N?void 0:N.confirm_password)&&(0,i.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(O=T.errors.confirm_password)||void 0===O?void 0:O.message})]})}),(0,i.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"2fa",children:"2FA toggle"}),(0,i.jsx)("div",{className:"hidden lg:block pl-5 mt-5",children:(0,i.jsxs)("fieldset",{className:"disabled:opacity-40",disabled:Object.values(A).some((function(e){return e}))&&!A.twoFA_login,children:[(0,i.jsxs)("label",{className:"relative pl-8 inline-flex items-center mr-6",children:[(0,i.jsx)("input",j({type:"radio",className:"text-primary",onClick:function(){return M("twoFA_login",1)},value:"1"},U("twoFA_login"))),(0,i.jsx)("span",{className:"text-sm text-dark1",children:"ON"})]}),(0,i.jsx)("br",{}),(0,i.jsxs)("label",{className:"relative inline-flex pl-8 mt-6 flex",children:[(0,i.jsx)("input",j({type:"radio",className:"text-primary",onClick:function(){return M("twoFA_login",0)},value:"0"},U("twoFA_login"))),(0,i.jsx)("span",{className:"text-sm text-dark1",children:"OFF"})]})]})}),(0,i.jsx)("div",{className:"block lg:hidden pl-5 mt-5",children:(0,i.jsx)(c.CO,{})})]})})]}),(0,i.jsx)("button",{ref:I,type:"submit",hidden:!0})]})})})]})})})}),"final-all")},3606:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings",function(){return n(8922)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,8661,9669,3913,2283,7010,5955,5774],(function(){return r=3606,e(e.s=r);var r}));var r=e.O();_N_E=r}]);