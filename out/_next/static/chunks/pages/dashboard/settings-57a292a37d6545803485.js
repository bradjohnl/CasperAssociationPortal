(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6130],{24015:function(e,r,s){"use strict";s.d(r,{a:function(){return u}});var i=s(96156),n=s(85893),l=s(67294),a=s(11163),t=s(49226);var o=s(44791);function d(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,i)}return s}var u=function(e,r){return function(s){var u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,r=void 0===e?"public":e,s=(0,t.v9)((function(e){return e.authReducer.userInfo}));return(0,l.useEffect)((function(){if("public"!==r&&r&&s)if(s&&null!==s&&void 0!==s&&s.isLoggedIn)if("member"===s.role){if("auth"===r)return"verifying"===s.period&&a.default.push("/verify-email"),"onboarding"===s.period&&a.default.push("/onboard"),void("final"===s.period&&a.default.push("/dashboard"));if("verifying"===r)return"onboarding"===s.period&&a.default.push("/onboard"),void("final"===s.period&&a.default.push("/dashboard"));if("onboarding"===r)return"verifying"===s.period&&a.default.push("/verify-email"),void("final"===s.period&&a.default.push("/dashboard"));if("final-member"===r||"final-all"===r)return"verifying"===s.period&&a.default.push("/verify-email"),void("onboarding"===s.period&&a.default.push("/onboard"));"final-admin"===r&&("verifying"===s.period&&a.default.push("/verify-email"),"onboarding"===s.period&&a.default.push("/onboard"),"final"===s.period&&a.default.push("/dashboard"))}else"admin"===s.role&&"final-all"!==r&&"final-admin"!==r&&a.default.push("/admin/dashboard");else"auth"!==r&&a.default.push("/login")}),[s,r]),{user:s}}({urlType:r}).user;if(r&&"public"!==r){if(!u)return(0,n.jsx)(o.Z,{});if("auth"===r&&u.isLoggedIn)return(0,n.jsx)(o.Z,{});if("auth"!==r&&!u.isLoggedIn)return(0,n.jsx)(o.Z,{});if("member"===u.role){if(["final-all","final-member"].includes(r)&&"final"!==u.period)return(0,n.jsx)(o.Z,{});if(["verifying"].includes(r)&&"verifying"!==u.period)return(0,n.jsx)(o.Z,{});if(["onboarding"].includes(r)&&"onboarding"!==u.period)return(0,n.jsx)(o.Z,{})}if("admin"===u.role&&["verifying","onboarding","final-member"].includes(r))return(0,n.jsx)(o.Z,{})}return(0,n.jsx)(e,function(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?d(Object(s),!0).forEach((function(r){(0,i.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}({},s))}}},24205:function(e,r,s){"use strict";s.d(r,{Ge:function(){return i},QI:function(){return n},tH:function(){return l},VX:function(){return a},FZ:function(){return t},ec:function(){return o},mS:function(){return d}});var i=/^[\.a-zA-Z\s ]*$/,n=/^[_A-Za-z0-9-+]+(\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z\u200c\u200b]{2,})$/,l=/^[A-Za-z0-9-]*$/,a=/^[A-Za-z0-9-]*$/,t=/(^)@[A-Za-z0-9-\_]*$/,o=/^[A-Za-z0-9-\s\.\_ ]*$/,d=new RegExp("".concat(/(?=.*?[a-zA-Z])/.source).concat(/(?=.*?[0-9])/.source).concat(/(?=.*?[\!\"\-\@\#\$\%\&\*\(\)\'\^\`\.\,\/\:\;\_\+\=\<\>\?\{\}\[\\\]])/.source))},8922:function(e,r,s){"use strict";s.r(r);var i=s(96156),n=s(85893),l=s(41664),a=s(67294),t=s(42283),o=s(49226),d=s(24015),u=s(25955),c=s(28569),f=s(4478),m=s(8517),p=s(56073),x=s(24205),h=s(43022);function v(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,i)}return s}function g(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?v(Object(s),!0).forEach((function(r){(0,i.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var j=function(e){var r=e.checkUserPassword,s=e.guardFor,i=(0,f.R)().onClosed,l=(0,a.useState)(),t=l[0],o=l[1];return(0,n.jsxs)("div",{className:"py-16 text-center w-96 mx-auto",children:[(0,n.jsx)("h3",{className:"capitalize text-xl text-center mb-2.5",children:"Please verify your current password first"}),(0,n.jsx)("input",{value:t,type:"password",onChange:function(e){return o(e.target.value)},placeholder:"Password",className:"w-full h-14 px-7 my-10 rounded-full shadow-activeLink focus:outline-none"}),(0,n.jsxs)("div",{className:"flex gap-2.5 flex-col items-center",children:[(0,n.jsx)(c.zx,{primary:!0,onClick:function(){r(t,s)},size:"large",disabled:!t,className:"w-full",children:"Submit"}),(0,n.jsx)(c.zx,{primaryOutline:!0,onClick:function(){i()},size:"large",className:"w-full",children:"Cancel"})]})]})},b={email:!1,password:!1,username:!1,twoFA_login:!1};r.default=(0,d.a)((function(){var e,r,s,d,v,w,y,N,O,_=(0,f.R)(),P=_.setDialog,Z=_.onClosed,k=(0,a.useState)(b),A=k[0],F=k[1],I=(0,a.useRef)(null),z=(0,o.I0)(),C=(0,a.useContext)(p.AppContext).setLoading,E=(0,o.v9)((function(e){return e.authReducer.userInfo})),S=(0,a.useState)(!1),L=S[0],D=S[1],q=(0,t.cI)(),U=q.register,$=q.handleSubmit,R=q.reset,T=q.formState,V=q.setValue,X=q.getValues,H=(0,q.watch)("twoFA_login",!1),M=function(e){A[e]?(F(g({},b)),V(e,E[e])):F(g(g({},b),{},(0,i.Z)({},e,!0)))},Q=function(e,r){C(!0),z((0,m.oH)({current_password:e},(function(e){C(!1),A[r]=!1,M(r),Z()}),(function(e){C(!1)})))},G=function(){return Object.values(A).some((function(e){return e}))};(0,a.useEffect)((function(){var e,r,s,i;R({email:(null===(e=E.fullInfo)||void 0===e?void 0:e.new_email)||(null===(r=E.fullInfo)||void 0===r?void 0:r.email),twoFA_login:"".concat(null===(s=E.fullInfo)||void 0===s?void 0:s.twoFA_login),username:null===(i=E.fullInfo)||void 0===i?void 0:i.username})}),[E]),(0,a.useEffect)((function(){!1===H||+E.fullInfo.twoFA_login===+H||A.twoFA_login||M("twoFA_login")}),[H]);var B=function(e){var r=e.mobile,s=e.field,i=G();return(0,n.jsx)("button",{type:"button",className:"".concat(r?"inline lg:hidden":"pl-6 hidden lg:inline"," text-primary focus:outline-none disabled:opacity-40"),onClick:function(){return function(e){["password","email"].includes(e)&&!A[e]?P({type:"DialogCustom",data:{content:(0,n.jsx)(j,{checkUserPassword:Q,guardFor:e})}}):M(e)}(s)},disabled:!A[s]&&i,children:A[s]?"Cancel":"Edit"})};return(0,n.jsx)(u.Z,{children:(0,n.jsx)(c.Zb,{className:"h-full lg:pl-24 lg:py-11 lg:shadow-2xl",noShadow:!0,children:(0,n.jsxs)("div",{className:"w-full h-full",children:[(0,n.jsxs)("div",{className:"card-header lg:mr-24 lg:h-70px",children:[(0,n.jsxs)("div",{className:"flex justify-between items-end mb-3.5",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h3",{className:"mr-24 text-dark2 text-xl font-medium",children:(0,n.jsx)(l.default,{href:"/dashboard/settings",children:(0,n.jsx)("a",{children:"User Settings"})})}),(0,n.jsx)("h3",{className:"text-gray text-xl font-medium",children:(0,n.jsx)(l.default,{href:"/dashboard/profile",children:(0,n.jsx)("a",{children:"My profile"})})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(c.zx,{primary:!0,isLoading:L,sizeSpinner:20,disabled:!G(),onClick:function(){return I.current.click()},children:"Save Changes"})})]}),(0,n.jsx)("div",{className:"border-primary border-b-2"})]}),(0,n.jsx)("div",{className:"card-body pt-8 pb-28 overflow-x-hidden overflow-y-auto lg:h-100%-70px -ml-1 pl-1",children:(0,n.jsx)("div",{className:"lg:pr-24",children:(0,n.jsxs)("form",{onSubmit:$((function(e){D(!0),F(g({},b)),V("password",null),V("confirm_password",null),z((0,m.d2)(e,(function(e){D(!1),z((0,h.Nq)({fullInfo:g(g({},E.fullInfo),e)}))}),(function(){D(!1),z((0,h.Nq)({fullInfo:g({},E.fullInfo)}))})))})),children:[(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,n.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("label",{htmlFor:"username",children:"Username"}),(0,n.jsx)(B,{mobile:!0,field:"username"})]}),(0,n.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,n.jsx)("input",g(g({name:"username",type:"text",disabled:!A.username},U("username",A.username?{required:"User Name is required",pattern:{message:"User Name is invalid",value:x.VX}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none disabled:text-gray"})),(0,n.jsx)(B,{field:"username"})]}),A.username&&(null===(e=T.errors)||void 0===e?void 0:e.username)&&(0,n.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(r=T.errors.username)||void 0===r?void 0:r.message})]})}),(0,n.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("label",{htmlFor:"email",children:["Email Address",(null===(s=E.fullInfo)||void 0===s?void 0:s.new_email)&&(0,n.jsx)("span",{className:"text-primary",children:" (verifying)"})]}),(0,n.jsx)(B,{mobile:!0,field:"email"})]}),(0,n.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,n.jsx)("input",g(g({name:"email",type:"text",disabled:!A.email},U("email",A.email?{required:"Email is required",pattern:{message:"Email is invalid",value:x.QI}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none disabled:text-gray"})),(0,n.jsx)(B,{field:"email"})]}),A.email&&(null===(d=T.errors)||void 0===d?void 0:d.email)&&(0,n.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(v=T.errors.email)||void 0===v?void 0:v.message})]})})]}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,n.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("label",{htmlFor:"password",children:"Update Password"}),(0,n.jsx)(B,{mobile:!0,field:"password"})]}),(0,n.jsxs)("div",{className:"mt-5 flex items-center",children:[(0,n.jsx)("input",g(g({disabled:!A.password,placeholder:"New Password",type:"password"},U("password",A.password?{required:"New Password is required",minLength:{message:"Min 8 characters",value:8},pattern:{message:"Password is invalid",value:x.mS}}:{})),{},{className:"w-full lg:w-3/4 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none"})),(0,n.jsx)(B,{field:"password"})]}),A.password&&(null===(w=T.errors)||void 0===w?void 0:w.password)&&(0,n.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(y=T.errors.password)||void 0===y?void 0:y.message}),(0,n.jsx)("div",{className:"pt-8",children:(0,n.jsx)("input",g(g({placeholder:"Confirm New Password",type:"password",disabled:!A.password},U("confirm_password",A.password?{validate:function(e){return e===X().password||"Password not match"}}:{})),{},{className:"w-full lg:w-3/4 mr-6 lg:mt-0 h-14 px-7 rounded-full shadow-activeLink focus:outline-none"}))}),A.password&&(null===(N=T.errors)||void 0===N?void 0:N.confirm_password)&&(0,n.jsx)("p",{className:"px-7 pt-2 text-primary",children:null===(O=T.errors.confirm_password)||void 0===O?void 0:O.message})]})}),(0,n.jsx)("div",{className:"w-full lg:w-1/2 pb-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"2fa",children:"2FA toggle"}),(0,n.jsxs)("div",{className:"hidden lg:block pl-5 mt-5",children:[(0,n.jsxs)("label",{className:"relative pl-8 inline-flex items-center mr-6",children:[(0,n.jsx)("input",g({type:"radio",className:"text-primary",value:"1"},U("twoFA_login"))),(0,n.jsx)("span",{className:"text-sm text-dark1",children:"ON"})]}),(0,n.jsxs)("label",{className:"relative pl-8 pt-6 flex",children:[(0,n.jsx)("input",g({type:"radio",className:"text-primary",value:"0"},U("twoFA_login"))),(0,n.jsx)("span",{className:"text-sm text-dark1",children:"OFF"})]})]}),(0,n.jsx)("div",{className:"block lg:hidden pl-5 mt-5",children:(0,n.jsx)(c.CO,{})})]})})]}),(0,n.jsx)("button",{ref:I,type:"submit",hidden:!0})]})})})]})})})}),"final-all")},3606:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings",function(){return s(8922)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,9669,3913,2283,1878,5955,2321],(function(){return r=3606,e(e.s=r);var r}));var r=e.O();_N_E=r}]);