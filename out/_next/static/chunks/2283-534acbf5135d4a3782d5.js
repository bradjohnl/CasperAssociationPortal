(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2283],{2283:function(e,r,t){"use strict";t.d(r,{Qr:function(){return I},Dq:function(){return ae},cI:function(){return De}});var n=t(7294),s=e=>"checkbox"===e.type,c=e=>null==e;const u=e=>"object"===typeof e;var a=e=>!c(e)&&!Array.isArray(e)&&u(e)&&!(e instanceof Date),i=e=>e.substring(0,e.search(/.\d/))||e,l=(e,r)=>[...e].some((e=>i(r)===e)),o=e=>e.filter(Boolean),f=e=>void 0===e,d=(e,r,t)=>{if(a(e)&&r){const n=o(r.split(/[,[\].]+?/)).reduce(((e,r)=>c(e)?e:e[r]),e);return f(n)||n===e?f(e[r])?t:e[r]:n}};const b="blur",g="change",y="onBlur",m="onChange",h="onSubmit",v="onTouched",x="all",O="max",p="min",A="maxLength",j="minLength",V="pattern",k="required",R="validate";var _=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const F=n.createContext(null);F.displayName="RHFContext";const w=()=>n.useContext(F);var S=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==x&&(t.current[r]=!s||x),n&&(n.current[r]=!0),e[r]}}):r,C=e=>a(e)&&!Object.keys(e).length,D=(e,r,t)=>{const n=_(e,"name");return C(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find((e=>r[e]===(!t||x)))},E=e=>Array.isArray(e)?e:[e],B="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;const N=B?"Proxy"in window:"undefined"!==typeof Proxy;function $({name:e,rules:r,defaultValue:t,control:c,shouldUnregister:u}){const i=w(),{defaultValuesRef:o,register:y,fieldsRef:m,unregister:h,fieldArrayNamesRef:v,controllerSubjectRef:x,shouldUnmount:O,inFieldArrayActionRef:p}=c||i.control,{onChange:A,onBlur:j,ref:V}=y(e,r),k=l(v.current,e),[R,_]=n.useState(f(d(m.current,e)._f.value)||k?f(t)?d(o.current,e):t:d(m.current,e)._f.value),F=function(e){const{control:r,name:t}=e||{},s=w(),{formStateRef:c,formStateSubjectRef:u,readFormStateRef:a}=r||s.control,i=n.useRef(t);i.current=t;const[l,o]=n.useState(c.current),f=n.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return n.useEffect((()=>{const e=u.current.subscribe({next:e=>(!i.current||!e.name||E(i.current).includes(e.name))&&D(e,f.current)&&o(Object.assign(Object.assign({},c.current),e))});return()=>e.unsubscribe()}),[]),S(N,l,a,f,!1)}({control:c||i.control,name:e});return d(m.current,e)._f.value=R,n.useEffect((()=>{const r=x.current.subscribe({next:r=>(!r.name||e===r.name)&&_(d(r.values,e))});return()=>{r.unsubscribe();const t=O||u;(k?t&&!p.current:t)?h(e):d(m.current,e)&&(d(m.current,e)._f.mount=!1)}}),[e]),{field:{onChange:r=>{const t=(e=>a(e)&&e.target?s(e.target)?e.target.checked:e.target.value:e)(r);_(t),A({target:{value:t,name:e},type:g})},onBlur:()=>{j({target:{name:e},type:b})},name:e,value:R,ref:e=>e&&V(e)},formState:F,fieldState:{invalid:!!d(F.errors,e),isDirty:!!d(F.dirtyFields,e),isTouched:!!d(F.touchedFields,e),error:d(F.errors,e)}}}const I=e=>e.render($(e));var M=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},T=e=>/^\w*$/.test(e),L=e=>o(e.replace(/["|']|\]/g,"").split(/\.|\[/));function U(e,r,t){let n=-1;const s=T(r)?[r]:L(r),c=s.length,u=c-1;for(;++n<c;){const r=s[n];let c=t;if(n!==u){const t=e[r];c=a(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=c,e=e[r]}return e}const W=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=d(e,n);if(t){const e=t._f,n=_(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&f(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else a(n)&&W(n,r)}}},q=(e,r={})=>{for(const t in e.current){const n=e.current[t];if(n&&!c(r)){const e=n._f,s=_(n,"_f");U(r,t,e&&e.ref?e.ref.disabled||e.refs&&e.refs.every((e=>e.disabled))?void 0:e.value:Array.isArray(n)?[]:{}),s&&q({current:s},r[t])}}return r};var P=()=>{const e="undefined"===typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)}))},H=(e=[],r)=>e.map((e=>Object.assign({[r]:e&&e[r]||P()},e))),Q=e=>c(e)||!u(e);function z(e,r,t){if(Q(e)||Q(r)||e instanceof Date||r instanceof Date)return e===r;if(!n.isValidElement(e)){const n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(const c of n){const n=e[c];if(!t||"ref"!==c){const e=r[c];if((a(n)||Array.isArray(n))&&(a(e)||Array.isArray(e))?!z(n,e,t):n!==e)return!1}}}return!0}function G(e,r){if(Q(e)||Q(r))return r;for(const n in r){const s=e[n],c=r[n];try{e[n]=a(s)&&a(c)||Array.isArray(s)&&Array.isArray(c)?G(s,c):c}catch(t){}}return e}function J(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],J(e[c][n],d(r[c]||{},n,[]),t[c][n],t[c],n)):z(d(r[c]||{},n),e[c][n])?U(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var K=(e,r,t)=>G(J(e,r,t.slice(0,e.length)),J(r,e,t.slice(0,e.length)));function X(e,r){return[...e,...E(r)]}var Y=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function Z(e,r,t){return[...e.slice(0,r),...E(t),...e.slice(r)]}var ee=e=>"string"===typeof e,re=(e,r,t)=>Array.isArray(e)?(f(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function te(e,r){return[...E(r),...e]}var ne=(e,r)=>f(r)?[]:function(e,r){let t=0;const n=[...e];for(const s of r)n.splice(s-t,1),t++;return o(n).length?n:[]}(e,E(r).sort(((e,r)=>e-r))),se=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},ce=e=>"boolean"===typeof e;function ue(e,r){const t=T(r)?[r]:L(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=f(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let c;n&&delete n[s];for(let u=0;u<t.slice(0,-1).length;u++){let r,n=-1;const s=t.slice(0,-(u+1)),i=s.length-1;for(u>0&&(c=e);++n<s.length;){const t=s[n];r=r?r[t]:e[t],i===n&&(a(r)&&C(r)||Array.isArray(r)&&!r.filter((e=>a(e)&&!C(e)||ce(e))).length)&&(c?delete c[t]:delete e[t]),c=r}}return e}const ae=({control:e,name:r,keyName:t="id",shouldUnregister:s})=>{const c=w(),u=n.useRef(""),a=n.useRef(!1),{isWatchAllRef:l,watchFieldsRef:b,getIsDirty:g,watchSubjectRef:y,fieldArraySubjectRef:m,fieldArrayNamesRef:h,fieldsRef:v,defaultValuesRef:x,formStateRef:O,formStateSubjectRef:p,readFormStateRef:A,validFieldsRef:j,fieldsWithValidationRef:V,fieldArrayDefaultValuesRef:k,unregister:R,shouldUnmount:F,inFieldArrayActionRef:S}=e||c.control,[C,D]=n.useState(H(d(v.current,r)&&a.current?d(q(v),r):d(k.current,i(r))?d(k.current,r,[]):d(x.current,r,[]),t));U(k.current,r,[...C]),h.current.add(r);const B=e=>e.map((e=>_(e||{},t))),N=()=>{const e=d(q(v),r,[]);return H(d(k.current,r,[]).map(((r,t)=>Object.assign(Object.assign({},r),e[t]))),t)},$=(e,t)=>t?f(t.focusIndex)?t.focusName?t.focusName:t.shouldFocus?`${r}.${e}`:"":`${r}.${t.focusIndex}`:`${r}.${e}`,I=(e=[])=>D(H(e,t)),M=e=>!o(d(e,r,[])).length&&ue(e,r),T=(e,t,n=[],s=!0)=>{if(S.current=!0,d(v.current,r)){const n=e(d(v.current,r),t.argA,t.argB);s&&U(v.current,r,n)}if(Array.isArray(d(O.current.errors,r))){const n=e(d(O.current.errors,r),t.argA,t.argB);s&&U(O.current.errors,r,n),M(O.current.errors)}if(A.current.touchedFields&&d(O.current.touchedFields,r)){const n=e(d(O.current.touchedFields,r),t.argA,t.argB);s&&U(O.current.touchedFields,r,n),M(O.current.touchedFields)}(A.current.dirtyFields||A.current.isDirty)&&(U(O.current.dirtyFields,r,K(B(n),d(x.current,r,[]),d(O.current.dirtyFields,r,[]))),(e=>{e&&U(O.current.dirtyFields,r,K(B(e),d(x.current,r,[]),d(O.current.dirtyFields,r,[])))})(n),M(O.current.dirtyFields)),A.current.isValid&&(U(j.current,r,e(d(j.current,r,[]),t.argA)),M(j.current),U(V.current,r,e(d(V.current,r,[]),t.argA)),M(V.current)),p.current.next({isDirty:g(r,B(n)),errors:O.current.errors,isValid:O.current.isValid})},L=(e,t=0,n="")=>e.forEach(((e,s)=>!Q(e)&&Object.entries(e).forEach((([e,c])=>{const u=`${n||r}.${n?s:t+s}.${e}`;Array.isArray(c)?L(c,s,u):U(v.current,u,{_f:{ref:{name:u},name:u,value:Q(c)?c:Object.assign({},c)}})}))));return n.useEffect((()=>{if(S.current=!1,l.current)p.current.next({});else for(const e of b.current)if(r.startsWith(e)){p.current.next({});break}y.current.next({name:r,formValues:q(v)}),u.current&&W(v.current,(e=>ee(e)&&e.startsWith(u.current))),u.current="",m.current.next({name:r,fields:B([...C])})}),[C,r]),n.useEffect((()=>{const e=m.current.subscribe({next({name:e,fields:t,isReset:n}){n&&(ue(v.current,e||r),e?U(k.current,e,t):k.current=t,I(d(k.current,r)))}});return!d(v.current,r)&&U(v.current,r,[]),a.current=!0,()=>{e.unsubscribe(),(F||s)&&R(r)}}),[]),{swap:n.useCallback(((e,r)=>{const t=N();se(t,e,r),T(se,{argA:e,argB:r},t,!1),I(t)}),[r]),move:n.useCallback(((e,r)=>{const t=N();re(t,e,r),I(t),T(re,{argA:e,argB:r},t,!1)}),[r]),prepend:n.useCallback(((e,r)=>{const t=E(e),n=te(N(),t);I(n),T(te,{argA:Y(e)},n),L(t),u.current=$(0,r)}),[r]),append:n.useCallback(((e,r)=>{const t=E(e),n=X(N(),t),s=n.length-t.length;I(n),T(X,{argA:Y(e)},n,!1),L(t,s),u.current=$(s,r)}),[r]),remove:n.useCallback((e=>{const t=ne(N(),e);(e=>{E(e).forEach((e=>U(v.current,`${r}${f(e)?"":`.${e}`}`,f(e)?[]:void 0)))})(e),I(t),T(ne,{argA:e},t)}),[r]),insert:n.useCallback(((e,r,t)=>{const n=E(r),s=Z(N(),e,n);I(s),T(Z,{argA:e,argB:Y(r)},s),L(n,e),u.current=$(e,t)}),[r]),fields:C}};function ie(e,r){const t={};for(const n of e){const e=d(r,n);e&&(T(n)?t[n]=e._f:U(t,n,e._f))}return t}var le=e=>"file"===e.type,oe=e=>"select-multiple"===e.type,fe=e=>"radio"===e.type;const de={value:!1,isValid:!1},be={value:!0,isValid:!0};var ge=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!f(e[0].attributes.value)?f(e[0].value)||""===e[0].value?be:{value:e[0].value,isValid:!0}:be:de}return de},ye=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const me={isValid:!1,value:null};var he=e=>Array.isArray(e)?e.reduce(((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e),me):me;function ve(e){if(e&&e._f){const t=e._f.ref;if(t.disabled)return;return le(t)?t.files:fe(t)?he(e._f.refs).value:oe(t)?(r=t.options,[...r].filter((({selected:e})=>e)).map((({value:e})=>e))):s(t)?ge(e._f.refs).value:ye(f(t.value)?e._f.ref.value:t.value,e._f)}var r}var xe=(e,r)=>e&&r&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Oe=e=>"function"===typeof e,pe=e=>ee(e)||n.isValidElement(e),Ae=e=>e instanceof RegExp;function je(e,r,t="validate"){if(pe(e)||Array.isArray(e)&&e.every(pe)||ce(e)&&!e)return{type:t,message:pe(e)?e:"",ref:r}}var Ve=e=>a(e)&&!Ae(e)?e:{value:e,message:""},ke=async({_f:{ref:e,refs:r,required:t,maxLength:n,minLength:u,min:i,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:g,mount:y}},m)=>{if(!y)return{};const h={},v=fe(e),x=s(e),_=v||x,F=(g||le(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,w=M.bind(null,d,m,h),S=(r,t,n,s=A,c=j)=>{const u=r?t:n;h[d]=Object.assign({type:r?s:c,message:u,ref:e},w(r?s:c,u))};if(t&&(!v&&!x&&(F||c(b))||ce(b)&&!b||x&&!ge(r).isValid||v&&!he(r).isValid)){const{value:n,message:s}=pe(t)?{value:!!t,message:t}:Ve(t);if(n&&(h[d]=Object.assign({type:k,message:s,ref:_?(r||[])[0]||{}:e},w(k,s)),!m))return h}if((!c(i)||!c(l))&&""!==b){let r,t;const n=Ve(l),s=Ve(i);if(isNaN(b)){const c=e.valueAsDate||new Date(b);ee(n.value)&&(r=c>new Date(n.value)),ee(s.value)&&(t=c<new Date(s.value))}else{const u=e.valueAsNumber||parseFloat(b);c(n.value)||(r=u>n.value),c(s.value)||(t=u<s.value)}if((r||t)&&(S(!!r,n.message,s.message,O,p),!m))return h}if(ee(b)&&!F&&(n||u)){const e=Ve(n),r=Ve(u),t=!c(e.value)&&b.length>e.value,s=!c(r.value)&&b.length<r.value;if((t||s)&&(S(t,e.message,r.message),!m))return h}if(ee(b)&&o&&!F){const{value:r,message:t}=Ve(o);if(Ae(r)&&!b.match(r)&&(h[d]=Object.assign({type:V,message:t,ref:e},w(V,t)),!m))return h}if(f){const t=_&&r?r[0]:e;if(Oe(f)){const e=je(await f(b),t);if(e&&(h[d]=Object.assign(Object.assign({},e),w(R,e.message)),!m))return h}else if(a(f)){let e={};for(const[r,n]of Object.entries(f)){if(!C(e)&&!m)break;const s=je(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),w(r,s.message)),m&&(h[d]=e))}if(!C(e)&&(h[d]=Object.assign({ref:t},e),!m))return h}}return h},Re=e=>({isOnSubmit:!e||e===h,isOnBlur:e===y,isOnChange:e===m,isOnAll:e===x,isOnTouch:e===v}),_e=e=>e instanceof HTMLElement;class Fe{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class we{constructor(e,r){this.observer=e,this.closed=!1,r.add((()=>this.closed=!0))}next(e){this.closed||this.observer.next(e)}}class Se{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new Fe,t=new we(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const Ce="undefined"===typeof window;function De({mode:e=h,reValidateMode:r=m,resolver:t,context:u,defaultValues:g={},shouldFocusError:y=!0,shouldUnregister:v,criteriaMode:O}={}){const p=n.useRef({}),A=n.useRef(new Set),j=n.useRef(new Se),V=n.useRef(new Set),k=n.useRef(new Se),R=n.useRef(new Se),F=n.useRef(new Se),w=n.useRef({}),$=n.useRef(!1),I=n.useRef(new Set),M=n.useRef(!1),T=n.useRef({}),L=n.useRef({}),P=n.useRef(g),H=n.useRef(!1),G=n.useRef(u),J=n.useRef(t),X=n.useRef(new Set),Y=Re(e),Z=O===x,[re,te]=n.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!Y.isOnSubmit,errors:{}}),ne=n.useRef({isDirty:!N,dirtyFields:!N,touchedFields:!N,isValidating:!N,isValid:!N,errors:!N}),se=n.useRef(re);G.current=u,J.current=t;const ce=()=>(se.current.isValid=z(L.current,T.current)&&C(se.current.errors),se.current.isValid),ae=n.useCallback(((e,r,t=!1,n={},s,u)=>{const a=d(se.current.errors,e);if(r?(ue(L.current,e),U(se.current.errors,e,r)):((d(T.current,e)||J.current)&&U(L.current,e,!0),ue(se.current.errors,e)),(t||u||(r?!z(a,r,!0):a)||!C(n)||ne.current.isValid&&se.current.isValid!==(J.current?!!s:ce()))&&!c(t)){const r=Object.assign(Object.assign({},n),{isValid:J.current?!!s:ce(),errors:se.current.errors,name:e});se.current=Object.assign(Object.assign({},se.current),r),j.current.next(u?{name:e}:r)}j.current.next({isValidating:!1})}),[]),de=n.useCallback(((e,r,t={},n,u)=>{u&&Ie(e);const a=d(p.current,e);if(a){const u=a._f;if(u){const a=B&&_e(u.ref)&&c(r)?"":r;if(u.value=ye(r,u),fe(u.ref)?(u.refs||[]).forEach((e=>e.checked=e.value===a)):le(u.ref)&&!ee(a)?u.ref.files=a:oe(u.ref)?[...u.ref.options].forEach((e=>e.selected=a.includes(e.value))):s(u.ref)&&u.refs?u.refs.length>1?u.refs.forEach((e=>e.checked=Array.isArray(a)?!!a.find((r=>r===e.value)):a===e.value)):u.refs[0].checked=!!a:u.ref.value=a,n){const t=q(p);U(t,e,r),R.current.next({values:Object.assign(Object.assign({},P.current),t),name:e})}t.shouldDirty&&ge(e,a),t.shouldValidate&&Ae(e)}else a._f={ref:{name:e,value:r},value:r}}}),[]),be=n.useCallback(((e,r)=>{const t=q(p);return e&&r&&U(t,e,r),!z(t,P.current)}),[]),ge=n.useCallback(((e,r,t=!0)=>{if(ne.current.isDirty||ne.current.dirtyFields){const n=!z(d(P.current,e),r),s=d(se.current.dirtyFields,e),c=se.current.isDirty;n?U(se.current.dirtyFields,e,!0):ue(se.current.dirtyFields,e),se.current.isDirty=be();const u={isDirty:se.current.isDirty,dirtyFields:se.current.dirtyFields,name:e},a=ne.current.isDirty&&c!==u.isDirty||ne.current.dirtyFields&&s!==d(se.current.dirtyFields,e);return a&&t&&j.current.next(u),a?u:{}}return{}}),[]),me=n.useCallback((async(e,r)=>{const t=(await ke(d(p.current,e),Z))[e];return ae(e,t,r),f(t)}),[Z]),he=n.useCallback((async(e,r=[])=>{const{errors:t}=await J.current(q(p),G.current,{criteriaMode:O,names:r,fields:ie(A.current,p.current)});for(const n of e){const e=d(t,n);e?U(se.current.errors,n,e):ue(se.current.errors,n)}return t}),[O]),pe=async e=>{let r=!0;for(const t in e){const n=e[t];if(n){const e=n._f,t=_(n,"_f");if(e){const t=await ke(n,Z);t[e.name]?(r=!1,U(se.current.errors,e.name,t[e.name]),ue(L.current,e.name)):d(T.current,e.name)&&(U(L.current,e.name,!0),ue(se.current.errors,e.name))}t&&await pe(t)}}return r},Ae=n.useCallback((async e=>{const r=f(e)?Object.keys(p.current):E(e);let t,n={};return j.current.next({isValidating:!0}),J.current?(n=await he(r,f(e)?void 0:r),t=r.every((e=>!d(n,e)))):t=f(e)?await pe(p.current):(await Promise.all(r.filter((e=>d(p.current,e))).map((async e=>await me(e,null))))).every(Boolean),j.current.next(Object.assign(Object.assign({},ee(e)?{name:e}:{}),{errors:se.current.errors,isValidating:!1,isValid:J.current?C(n):ce()})),t}),[he,me]),je=n.useCallback(((e,r,t)=>Object.entries(r).forEach((([r,n])=>{const s=`${e}.${r}`,c=d(p.current,s);X.current.has(e)||!Q(n)||c&&!c._f?je(s,n,t):de(s,n,t,!0,!c)}))),[Ae]),Ve=e=>H.current||I.current.has(e)||I.current.has((e.match(/\w+/)||[])[0]),Fe=(e,r,t,n)=>{const s=d(p.current,e),c=f(s._f.value)?d(P.current,e):s._f.value;return s&&!f(c)&&(t&&t.defaultChecked?s._f.value=ve(s):l(X.current,e)?s._f.value=c:de(e,c)),(!f(c)||n)&&xe(r,s._f.mount)&&!Y.isOnSubmit&&s&&ne.current.isValid&&ke(s,Z).then((r=>{C(r)?U(L.current,e,!0):ue(L.current,e),se.current.isValid!==ce()&&te(Object.assign(Object.assign({},se.current),{isValid:ce()}))})),c},we=n.useCallback((async({type:e,target:t,target:{value:n,type:c}})=>{let u,a,l=t.name;const o=d(p.current,l);if(o){let g=c?ve(o):void 0;g=f(g)?n:g;const y=e===b,{isOnBlur:m,isOnChange:h}=Re(r),v=!xe(o._f,o._f.mount)&&!J.current&&!d(se.current.errors,l)||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:a,isOnAll:i})=>!i&&(!a&&t?!(n||u):(a?s:e)?!u:!(a?c:r)||u))(Object.assign({isBlurEvent:y,isTouched:!!d(se.current.touchedFields,l),isSubmitted:se.current.isSubmitted,isReValidateOnBlur:m,isReValidateOnChange:h},Y)),x=!y&&Ve(l);f(g)||(o._f.value=g);const A=ge(l,o._f.value,!1);y&&!d(se.current.touchedFields,l)&&(U(se.current.touchedFields,l,!0),ne.current.touchedFields&&(A.touchedFields=se.current.touchedFields));let V=!C(A)||x;if(v)return!y&&k.current.next({name:l,type:e,formValues:De()}),V&&j.current.next(x?{name:l}:Object.assign(Object.assign({},A),{name:l}));if(j.current.next({isValidating:!0}),J.current){const{errors:e}=await J.current(q(p),G.current,{criteriaMode:O,fields:ie([l],p.current),names:[l]}),r=se.current.isValid;if(u=d(e,l),s(t)&&!u){const r=i(l),t=d(e,r,{});t.type&&t.message&&(u=t),(t||d(se.current.errors,r))&&(l=r)}a=C(e),r!==a&&(V=!0)}else u=(await ke(o,Z))[l];!y&&k.current.next({name:l,type:e,formValues:De()}),ae(l,u,V,A,a,x)}}),[]),De=e=>{const r=Object.assign(Object.assign({},P.current),q(p));return f(e)?r:ee(e)?d(r,e):e.map((e=>d(r,e)))},Ee=n.useCallback((async(e={})=>{const r=se.current.isValid;if(t){const{errors:r}=await J.current(Object.assign(Object.assign({},q(p)),e),G.current,{criteriaMode:O,fields:ie(A.current,p.current)});se.current.isValid=C(r)}else ce();r!==se.current.isValid&&j.current.next({isValid:se.current.isValid})}),[O]),Be=n.useCallback(((e,r,t,n)=>{const s=Array.isArray(e),c=n||M.current?Object.assign(Object.assign({},P.current),n||q(p)):f(r)?P.current:s?r:{[e]:r};if(f(e))return t&&(H.current=!0),c;const u=[];for(const a of E(e))t&&I.current.add(a),u.push(d(c,a));return s?u:u[0]}),[]),Ne=(e,r={})=>{for(const t of e?E(e):Object.keys(A.current))A.current.delete(t),X.current.delete(t),d(p.current,t)&&(r.keepIsValid||(ue(T.current,t),ue(L.current,t)),!r.keepError&&ue(se.current.errors,t),!r.keepValue&&ue(p.current,t),!r.keepDirty&&ue(se.current.dirtyFields,t),!r.keepTouched&&ue(se.current.touchedFields,t),!v&&!r.keepDefaultValue&&ue(P.current,t),k.current.next({name:t,formValues:De()}));j.current.next(Object.assign(Object.assign(Object.assign({},se.current),r.keepDirty?{isDirty:be()}:{}),J.current?{}:{isValid:ce()})),!r.keepIsValid&&Ee()},$e=(e,r,t)=>{Ie(e,t);let n=d(p.current,e);const c=(e=>fe(e)||s(e))(r);if(r===n._f.ref||B&&_e(n._f.ref)&&!_e(r)||c&&Array.isArray(n._f.refs)&&o(n._f.refs).find((e=>e===r)))return;n={_f:c?Object.assign(Object.assign({},n._f),{refs:[...o(n._f.refs||[]).filter((e=>_e(e)&&document.contains(e))),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},n._f),{ref:r})},U(p.current,e,n);const u=Fe(e,t,r,!0);(c&&Array.isArray(u)?!z(d(p.current,e)._f.value,u):f(d(p.current,e)._f.value))&&(d(p.current,e)._f.value=ve(d(p.current,e)))},Ie=n.useCallback(((e,r)=>{const t=!d(p.current,e);return U(p.current,e,{_f:Object.assign(Object.assign(Object.assign({},t?{ref:{name:e}}:Object.assign({ref:(d(p.current,e)._f||{}).ref||{}},d(p.current,e)._f)),{name:e,mount:!0}),r)}),xe(r,!0)&&U(T.current,e,!0),A.current.add(e),t&&Fe(e,r),Ce?{name:e}:{name:e,onChange:we,onBlur:we,ref:t=>{if(t)$e(e,t,r);else{const t=d(p.current,e),n=v||r&&r.shouldUnregister;t&&t._f&&(t._f.mount=!1,f(t._f.value)&&!f(t._f.ref.value)&&(t._f.value=t._f.ref.value)),B&&(l(X.current,e)?n&&!$.current:n)&&V.current.add(e)}}}}),[P.current]),Me=n.useCallback(((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=!0,s=q(p);j.current.next({isSubmitting:!0});try{if(J.current){const{errors:e,values:r}=await J.current(s,G.current,{criteriaMode:O,fields:ie(A.current,p.current)});se.current.errors=e,s=r}else await pe(p.current);C(se.current.errors)&&Object.keys(se.current.errors).every((e=>d(s,e)))?(j.current.next({errors:{},isSubmitting:!0}),await e(s,t)):(r&&await r(se.current.errors,t),y&&W(p.current,(e=>d(se.current.errors,e)),A.current))}catch(c){n=!1}finally{se.current.isSubmitted=!0,j.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(se.current.errors)&&n,submitCount:se.current.submitCount+1,errors:se.current.errors})}}),[y,Z,O]),Te=n.useCallback((({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepDefaultValues:s,keepIsValid:c,keepSubmitCount:u},a)=>{c||(L.current={},T.current={}),I.current=new Set,H.current=!1,j.current.next({submitCount:u?se.current.submitCount:0,isDirty:r?se.current.isDirty:!!s&&z(a,P.current),isSubmitted:!!t&&se.current.isSubmitted,isValid:c?se.current.isValid:!!Ee(a),dirtyFields:r?se.current.dirtyFields:{},touchedFields:n?se.current.touchedFields:{},errors:e?se.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})}),[]),Le=(e,r="")=>{const t=d(p.current,r);if((!t||t&&!t._f)&&(!t&&(Q(e)||B&&(e instanceof FileList||e instanceof Date))&&U(p.current,r,{_f:{ref:{name:r,value:e},value:e,name:r}}),Array.isArray(e)||a(e))){r&&!d(p.current,r)&&U(p.current,r,Array.isArray(e)?[]:{});for(const t in e)Le(e[t],r+(r?".":"")+t)}};return n.useEffect((()=>{Le(P.current);const e=j.current.subscribe({next(e){D(e,ne.current,!0)&&(se.current=Object.assign(Object.assign({},se.current),e),te(se.current))}}),r=F.current.subscribe({next(e){if(e.fields&&e.name&&ne.current.isValid){const r=q(p);U(r,e.name,e.fields),Ee(r)}}});return J.current&&ne.current.isValid&&Ee(),()=>{k.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}}),[]),n.useEffect((()=>{const e=e=>!_e(e)||!document.contains(e);M.current=!0;for(const r of V.current){const t=d(p.current,r);t&&(t._f.refs?t._f.refs.every(e):e(t._f.ref))&&Ne(r)}V.current=new Set})),{control:n.useMemo((()=>({register:Ie,isWatchAllRef:H,inFieldArrayActionRef:$,watchFieldsRef:I,getIsDirty:be,formStateSubjectRef:j,fieldArraySubjectRef:F,controllerSubjectRef:R,watchSubjectRef:k,watchInternal:Be,fieldsRef:p,validFieldsRef:L,fieldsWithValidationRef:T,fieldArrayNamesRef:X,readFormStateRef:ne,formStateRef:se,defaultValuesRef:P,fieldArrayDefaultValuesRef:w,unregister:Ne,shouldUnmount:v})),[]),formState:S(N,re,ne),trigger:Ae,register:Ie,handleSubmit:Me,watch:n.useCallback(((e,r)=>Oe(e)?k.current.subscribe({next:t=>e(Be(void 0,r),t)}):Be(e,r,!0)),[]),setValue:n.useCallback(((e,r,t={})=>{const n=d(p.current,e),s=X.current.has(e);s&&(F.current.next({fields:r,name:e,isReset:!0}),(ne.current.isDirty||ne.current.dirtyFields)&&t.shouldDirty&&(U(se.current.dirtyFields,e,K(r,d(P.current,e,[]),d(se.current.dirtyFields,e,[]))),j.current.next({name:e,dirtyFields:se.current.dirtyFields,isDirty:be(e,r)})),!r.length&&U(p.current,e,[])&&U(w.current,e,[])),(n&&!n._f||s)&&!c(r)?je(e,r,s?{}:t):de(e,r,t,!0,!n),Ve(e)&&j.current.next({}),k.current.next({name:e,formValues:De()})}),[je]),getValues:n.useCallback(De,[]),reset:n.useCallback(((e,r={})=>{const t=e||P.current;if(B&&!r.keepValues)for(const s of A.current){const e=d(p.current,s);if(e&&e._f){const r=Array.isArray(e._f.refs)?e._f.refs[0]:e._f.ref;try{_e(r)&&r.closest("form").reset();break}catch(n){}}}!r.keepDefaultValues&&(P.current=Object.assign({},t)),r.keepValues||(p.current={},R.current.next({values:Object.assign({},t)}),k.current.next({formValues:Object.assign({},t)}),F.current.next({fields:Object.assign({},t),isReset:!0})),!r.keepDefaultValues&&Le(Object.assign({},t)),Te(r,e)}),[]),clearErrors:n.useCallback((e=>{e?E(e).forEach((e=>ue(se.current.errors,e))):se.current.errors={},j.current.next({errors:se.current.errors})}),[]),unregister:n.useCallback(Ne,[]),setError:n.useCallback(((e,r,t)=>{const n=((d(p.current,e)||{_f:{}})._f||{}).ref;U(se.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),j.current.next({name:e,errors:se.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()}),[]),setFocus:n.useCallback((e=>d(p.current,e)._f.ref.focus()),[])}}}}]);